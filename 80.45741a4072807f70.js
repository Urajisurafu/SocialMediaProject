"use strict";(self.webpackChunkSocialMediaProject=self.webpackChunkSocialMediaProject||[]).push([[80],{2080:(A,u,o)=>{o.r(u),o.d(u,{FriendsWindowModule:()=>J});var a=o(4755),l=o(3676),b=o(8854),O=o(1188),e=o(2223),S=o(5861),f=o(8505),g=o(3900),m=o(4128),p=o(4004),v=o(9300),y=o(1762),h=o(3919),C=o(9744);let P=(()=>{class i{constructor(n,t,d){this.firestore=n,this.userDataService=t,this.notificationsService=d,this.userCollection=this.firestore.collection("Users")}getYourCurrentFriends(){const n=this.userDataService.getCurrentUserId();return this.userCollection.doc(n).collection("UserFriends",t=>t.where("isFriend","==",!0)).valueChanges()}getYourCurrentFriendsInfo(){return this.getYourCurrentFriends().pipe((0,f.b)(n=>{n.length<=0&&(this.listOfFriends=[])}),(0,g.w)(n=>{const d=n.map(s=>s.friendId).map(s=>this.userCollection.doc(s).get());return(0,m.D)(d)}),(0,p.U)(n=>n.map(t=>t.data())),(0,v.h)(n=>void 0!==n),(0,f.b)(n=>{this.listOfFriends=n}))}getYourNotificationFriends(){return this.notificationsService.getYourNotificationFriends(this.userDataService.userInfo.userId).pipe((0,f.b)(n=>{n.length<=0&&(this.listOfNotificationFriends=[])}),(0,g.w)(n=>{const d=n.map(s=>s.creatorId).map(s=>this.userCollection.doc(s).get());return(0,m.D)(d)}),(0,p.U)(n=>n.map(t=>t.data())),(0,v.h)(n=>void 0!==n),(0,f.b)(n=>{this.listOfNotificationFriends=n}))}}return i.\u0275fac=function(n){return new(n||i)(e.LFG(y.ST),e.LFG(h.M),e.LFG(C.T))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var W=o(5213),M=o(1728),F=o(6012),x=o(3617);function N(i,r){1&i&&(e.TgZ(0,"div",7),e._uU(1," Your friends list is empty. "),e.qZA())}const I=function(i,r){return{even:i,odd:r}};function T(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e.NdJ("click",function(){const s=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.goToFriendPageClick(s.userId))}),e._UZ(2,"img",10),e.TgZ(3,"div"),e._uU(4),e.qZA()(),e.TgZ(5,"div",11),e._uU(6),e.qZA(),e.TgZ(7,"div",12)(8,"button",13),e.NdJ("click",function(){const s=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.deleteFriendClick(s.userId))}),e._uU(9," Delete "),e.qZA()()()}if(2&i){const n=r.$implicit,t=r.index;e.Q6J("ngClass",e.WLB(4,I,t%2==0,t%2!=0)),e.xp6(2),e.s9C("src",n.imageUrl,e.LSH),e.xp6(2),e.Oqu(n.publicName),e.xp6(2),e.Oqu(n.description)}}function Z(i,r){1&i&&(e.TgZ(0,"div",7),e._uU(1," No one has sent you a friend invite yet. "),e.qZA())}function U(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div",8),e._UZ(1,"img",10),e.TgZ(2,"div",14),e._uU(3),e.qZA(),e.TgZ(4,"div",11),e._uU(5,"Wants to add you as a friend."),e.qZA(),e.TgZ(6,"div",12)(7,"button",13),e.NdJ("click",function(){const s=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.addToFriendsClick(s.userId))}),e._uU(8," Add "),e.qZA(),e.TgZ(9,"button",15),e.NdJ("click",function(){const s=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.rejectFriendClick(s.userId))}),e._uU(10," Reject "),e.qZA()()()}if(2&i){const n=r.$implicit,t=r.index;e.Q6J("ngClass",e.WLB(3,I,t%2==0,t%2!=0)),e.xp6(1),e.s9C("src",n.imageUrl,e.LSH),e.xp6(2),e.Oqu(n.publicName)}}const w=function(i){return{"without-invite":i}};let k=(()=>{class i{constructor(n,t,d,s){this.friendsWindowService=n,this.userDataService=t,this.userPageService=d,this.notificationsService=s,this.selectedIndex=0}ngOnInit(){this.delayUntilUserInfo()}ngOnDestroy(){this.yourCurrentFriendsInfo?.unsubscribe(),this.yourNotificationFriends?.unsubscribe()}getListOfFriends(){return this.friendsWindowService.listOfFriends}getListOfNotificationFriends(){return this.friendsWindowService.listOfNotificationFriends}isNoHaveFriends(){if(this.friendsWindowService.listOfNotificationFriends)return this.friendsWindowService.listOfFriends.length<=0}isNoHaveNotificationFriends(){if(this.friendsWindowService.listOfNotificationFriends)return this.friendsWindowService.listOfNotificationFriends.length<=0}delayUntilUserInfo(){var n=this;return(0,S.Z)(function*(){n.userDataService.userInfo?.userId?(n.yourCurrentFriendsInfo=n.friendsWindowService.getYourCurrentFriendsInfo().subscribe(),n.yourNotificationFriends=n.friendsWindowService.getYourNotificationFriends().subscribe()):(yield new Promise(t=>{setTimeout(t,100)}),yield n.delayUntilUserInfo())})()}deleteFriendClick(n){this.userPageService.deleteFriend(n)}rejectFriendClick(n){const t=this.userDataService.getCurrentUserId();this.userPageService.deleteFriend(n),this.notificationsService.deleteNotificationFriend(t,n)}addToFriendsClick(n){this.userPageService.addToFriends(n)}goToFriendPageClick(n){this.userPageService.goToFriendPage(n)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(P),e.Y36(h.M),e.Y36(W.v),e.Y36(C.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-friends-info-window"]],inputs:{selectedIndex:"selectedIndex"},decls:11,vars:11,consts:[[1,"friends-window"],[1,"friends-group",3,"selectedIndex"],["label","Friends"],[1,"friends-content",3,"ngClass"],["class","friends-content-no-invite",4,"ngIf"],["class","friends-content-item",3,"ngClass",4,"ngFor","ngForOf"],["label","New friends"],[1,"friends-content-no-invite"],[1,"friends-content-item",3,"ngClass"],[1,"item-name",3,"click"],["alt","User photo",1,"item-avatar",3,"src"],[1,"item-text"],[1,"item-buttons"],["mat-flat-button","","color","warn",3,"click"],[1,"item-name"],["mat-flat-button","","color","primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-card",0)(1,"mat-tab-group",1)(2,"mat-tab",2)(3,"mat-card-content",3),e.YNc(4,N,2,0,"div",4),e.YNc(5,T,10,7,"div",5),e.qZA()(),e.TgZ(6,"mat-tab",6)(7,"mat-card-content",3),e.YNc(8,Z,2,0,"div",4),e.YNc(9,U,11,6,"div",5),e.qZA()()(),e._UZ(10,"router-outlet"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(2),e.Q6J("ngClass",e.VKq(7,w,t.isNoHaveFriends())),e.xp6(1),e.Q6J("ngIf",t.isNoHaveFriends()),e.xp6(1),e.Q6J("ngForOf",t.getListOfFriends()),e.xp6(2),e.Q6J("ngClass",e.VKq(9,w,t.isNoHaveNotificationFriends())),e.xp6(1),e.Q6J("ngIf",t.isNoHaveNotificationFriends()),e.xp6(1),e.Q6J("ngForOf",t.getListOfNotificationFriends()))},dependencies:[a.mk,a.sg,a.O5,M.lW,F.a8,F.dn,x.uX,x.SP,l.lC],styles:[".friends-window[_ngcontent-%COMP%]{width:100%;min-width:800px;background-color:#b4b4b4}.friends-group[_ngcontent-%COMP%]{height:100%}.friends-content[_ngcontent-%COMP%]{margin:10px;border-radius:10px;background-color:#fff;min-height:400px}.friends-content-no-invite[_ngcontent-%COMP%]{font-family:Bradley Hand,cursive;display:flex;align-items:center;justify-content:center;font-size:24px}.friends-content-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px}.friends-content[_ngcontent-%COMP%]   .item-avatar[_ngcontent-%COMP%]{font-size:10px;background-color:#fff;margin:5px 10px 0;width:50px;height:50px;border-radius:50%;border:3px solid #000000;box-shadow:0 0 7px #666;object-fit:cover}.friends-content[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{display:flex;align-items:center;flex-basis:35%;cursor:pointer}.friends-content[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]:hover{color:#f44336}.friends-content[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex-basis:40%}.friends-content[_ngcontent-%COMP%]   .item-buttons[_ngcontent-%COMP%]{flex-basis:30%;display:flex;justify-content:space-around}.friends-content[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#d3d3d3}.friends-content[_ngcontent-%COMP%]   .odd[_ngcontent-%COMP%]{background-color:#e5e5e5}.without-invite[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.mat-mdc-card-content[_ngcontent-%COMP%]:last-child{padding:0}"]}),i})(),Y=(()=>{class i{constructor(n,t){this.storageService=n,this.route=t,this.selectedIndex=0,this.backgroundStorage="",this.routeParamsSubscription=this.route.params.subscribe(d=>{this.selectedIndex=d.selectedIndex})}ngOnInit(){this.storageSubscription=this.storageService.getDataFromStorage("Background/friends-window.jpg").subscribe(t=>this.backgroundStorage=`url(${t})`)}ngOnDestroy(){this.storageSubscription&&this.storageSubscription.unsubscribe(),this.routeParamsSubscription&&this.routeParamsSubscription.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(O.V),e.Y36(l.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-friends-window"]],decls:2,vars:3,consts:[[1,"friends-window"],[3,"selectedIndex"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-friends-info-window",1),e.qZA()),2&n&&(e.Udp("background-image",t.backgroundStorage),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex))},dependencies:[k],styles:[".friends-window[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;min-height:100%;background:no-repeat center center fixed;background-size:cover}"]}),i})(),J=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.ez,b.q,l.Bz.forChild([{path:"",component:Y}])]}),i})()}}]);